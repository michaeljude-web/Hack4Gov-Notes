<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base64 Encoder/Decoder</title>
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-gradient min-vh-100 d-flex align-items-center py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12 col-lg-10 col-xl-8">
                <div class="card shadow-lg border-0">
                    <div class="card-body p-4 p-md-5">
                        <div class="text-center mb-4">
                            <h1 class="display-5 fw-bold mb-2">Base64 Tool</h1>
                            <p class="text-muted">Encode at Decode ng Base64 strings</p>
                        </div>

                        <ul class="nav nav-pills nav-fill mb-4" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="decode-tab" data-bs-toggle="pill" data-bs-target="#decode" type="button" role="tab" onclick="switchTab('decode')">
                                    Decode
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="encode-tab" data-bs-toggle="pill" data-bs-target="#encode" type="button" role="tab" onclick="switchTab('encode')">
                                    Encode
                                </button>
                            </li>
                        </ul>

                        <div class="tab-content">
                            <div class="mb-4">
                                <label for="input" class="form-label fw-semibold" id="inputLabel">
                                    I-paste ang Base64 string:
                                </label>
                                <textarea class="form-control form-control-lg font-monospace" id="input" rows="6" placeholder="cGljb0NURntjMDBrMWVfbTBuc3Rlcl9sMHZlc19jMDBraWVzXzc4QjRDMzkwfQ=="></textarea>
                            </div>

                            <div class="d-grid gap-2 d-md-flex mb-4">
                                <button class="btn btn-primary btn-lg flex-fill" onclick="processInput()">
                                    <span id="btnText">Decode</span>
                                </button>
                                <button class="btn btn-outline-secondary btn-lg" onclick="clearAll()">
                                    Clear
                                </button>
                            </div>

                            <div class="mb-3">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <label class="form-label fw-semibold mb-0">Result:</label>
                                    <button class="btn btn-sm btn-outline-primary" onclick="copyResult()" id="copyBtn" style="display:none;">
                                        Copy
                                    </button>
                                </div>
                                <div class="card bg-body-secondary">
                                    <div class="card-body">
                                        <pre class="mb-0 font-monospace" id="resultText" style="white-space: pre-wrap; word-wrap: break-word;"><span class="text-muted">Walang result pa...</span></pre>
                                    </div>
                                </div>
                            </div>

                            <div class="alert alert-danger d-none" role="alert" id="error">
                                <span id="errorText"></span>
                            </div>
                            <div class="alert alert-success d-none" role="alert" id="success">
                                <span id="successText"></span>
                            </div>
                        </div>

                        <div class="text-center mt-4">
                            <small class="text-muted">
                                Tip: Press Ctrl+Enter para ma-process ang input
                            </small>
                        </div>
                    </div>
                </div>

                <div class="text-center mt-4">
                    <p class="text-white-50 small">
                        Lahat ng processing ay sa browser lang. Walang data na nase-send sa server.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script>
        let currentMode = 'decode';

        function switchTab(mode) {
            currentMode = mode;
            const inputLabel = document.getElementById('inputLabel');
            const btnText = document.getElementById('btnText');

            if (mode === 'decode') {
                inputLabel.textContent = 'I-paste ang Base64 string:';
                btnText.textContent = 'Decode';
            } else {
                inputLabel.textContent = 'I-type ang text na gusto mo i-encode:';
                btnText.textContent = 'Encode';
            }

            clearAll();
        }

        function processInput() {
            const input = document.getElementById('input').value.trim();
            const resultText = document.getElementById('resultText');
            const copyBtn = document.getElementById('copyBtn');
            const errorDiv = document.getElementById('error');
            
            errorDiv.classList.add('d-none');

            if (!input) {
                showError('Please enter some text!');
                return;
            }

            try {
                let result;
                if (currentMode === 'decode') {
                    result = atob(input);
                } else {
                    result = btoa(input);
                }
                
                resultText.innerHTML = result;
                resultText.classList.remove('text-muted');
                copyBtn.style.display = 'block';
            } catch (e) {
                showError('Invalid input! ' + (currentMode === 'decode' ? 'Hindi valid na Base64 string.' : 'Hindi ma-encode ang text.'));
                resultText.innerHTML = '<span class="text-muted">Walang result pa...</span>';
                copyBtn.style.display = 'none';
            }
        }

        function clearAll() {
            document.getElementById('input').value = '';
            document.getElementById('resultText').innerHTML = '<span class="text-muted">Walang result pa...</span>';
            document.getElementById('copyBtn').style.display = 'none';
            document.getElementById('error').classList.add('d-none');
            document.getElementById('success').classList.add('d-none');
        }

        function copyResult() {
            const resultText = document.getElementById('resultText').textContent;
            navigator.clipboard.writeText(resultText).then(() => {
                showSuccess('Nakopy na sa clipboard!');
            });
        }

        function showError(message) {
            const errorDiv = document.getElementById('error');
            const errorText = document.getElementById('errorText');
            errorText.textContent = message;
            errorDiv.classList.remove('d-none');
        }

        function showSuccess(message) {
            const successDiv = document.getElementById('success');
            const successText = document.getElementById('successText');
            successText.textContent = message;
            successDiv.classList.remove('d-none');
            setTimeout(() => {
                successDiv.classList.add('d-none');
            }, 2000);
        }

        document.getElementById('input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && e.ctrlKey) {
                processInput();
            }
        });
    </script>
</body>
</html>